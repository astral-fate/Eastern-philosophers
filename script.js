document.addEventListener('DOMContentLoaded', () => {
    const philosophers = [
        {
            id: 1,
            name: "واصل بن عطاء",
            dates: "700 - 748 م",
            bio: "مؤسس المعتزلة، إحدى أولى المدارس الكلامية في الإسلام. عُرف بتركيزه على العقل والعدل الإلهي.",
            influence: "الفكر الإسلامي المبكر",
            area: "علم الكلام، القدر، أصول الفقه",
            works: "أعماله مفقودة، وتُعرف آراؤه من خلال كتابات خصومه والمؤرخين.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 2,
            name: "الجعد بن درهم",
            dates: "توفي 724 م",
            bio: "متكلم يوصف بأنه من أوائل من قال بخلق القرآن ونفى الصفات، أثر في جهم بن صفوان.",
            influence: "غير محدد",
            area: "علم الكلام، نفي الصفات",
            works: "آراء منقولة في كتب الفرق.",
            category: "علم الكلام المبكر"
        },
        {
            id: 3,
            name: "جهم بن صفوان",
            dates: "توفي 746 م",
            bio: "متكلم، تنسب إليه فرقة الجهمية. اشتهر بآرائه في نفي الصفات والجبر.",
            influence: "الجعد بن درهم",
            area: "علم الكلام (الجبر ونفي الصفات)",
            works: "آراء منقولة بشكل رئيسي.",
            category: "علم الكلام المبكر"
        },
        {
            id: 4,
            name: "مقاتل بن سليمان",
            dates: "توفي 767 م",
            bio: "مفسر للقرآن من أوائل المفسرين، نُسبت إليه آراء في التجسيم.",
            influence: "التراث التفسيري المبكر",
            area: "التفسير، علم الكلام",
            works: "التفسير الكبير (منسوب إليه).",
            category: "التفسير وعلم الكلام"
        },
        {
            id: 5,
            name: "جابر بن حيان",
            dates: "721 - 815 م",
            bio: "كيميائي وفلكي وفيلسوف يُنسب إليه عدد هائل من الكتابات. عاش في الكوفة وبغداد. حياته يكتنفها الغموض.",
            influence: "الفلسفة اليونانية (خاصة الفيثاغورية والمادية) والفكر المصري القديم.",
            area: "الكيمياء (الخيمياء)، الفلسفة الطبيعية، علم الكونيات، التصوف.",
            works: "كتاب السبعين، كتاب الموازين، كتاب السموم ودفع مضارها.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 6,
            name: "ضرار بن عمرو",
            dates: "728 - 815 م",
            bio: "متكلم معتزلي من طبقة النظام، له آراء خاصة في الاستطاعة وخلق الأفعال.",
            influence: "فكر المعتزلة",
            area: "علم الكلام",
            works: "كتبه مفقودة، وآراؤه محفوظة في كتب المقالات.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 7,
            name: "بشر المريسي",
            dates: "توفي 833 م",
            bio: "متكلم، كان له دور بارز في الترويج لعقيدة خلق القرآن في عهد المأمون. تأثر بالجهمية.",
            influence: "الجهمية، المعتزلة",
            area: "علم الكلام",
            works: "كتبه وآراؤه منقولة في المصادر.",
            category: "علم الكلام المبكر"
        },
        {
            id: 8,
            name: "أبو الهذيل العلاف",
            dates: "748 - 840 م",
            bio: "من شيوخ المعتزلة البارزين في البصرة، معروف بمناظراته وأفكاره في الطبيعيات والإلهيات.",
            influence: "واصل بن عطاء",
            area: "علم الكلام، الفلسفة الطبيعية",
            works: "أعماله مفقودة، آراؤه منقولة في كتب الفرق.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 9,
            name: "النظّام",
            dates: "775 - 845 م",
            bio: "إبراهيم بن سيار النظام، من أئمة المعتزلة، عُرف بآرائه المبتكرة في الفلسفة الطبيعية (نظرية الطفرة) والشك المنهجي.",
            influence: "المعتزلة، الفلسفة اليونانية",
            area: "علم الكلام، الفلسفة الطبيعية (الطفرة)",
            works: "كتبه مفقودة، آراؤه محفوظة في كتب خصومه.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 10,
            name: "ابن كلاب",
            dates: "توفي 855 م",
            bio: "متكلم من البصرة، يعتبر الممهد لظهور المدرسة الأشعرية، حيث دافع عن الصفات الإلهية ضد المعتزلة.",
            influence: "الفكر السني التقليدي",
            area: "علم الكلام (مهد للأشعرية)",
            works: "آراؤه مبثوثة في كتب الأشاعرة الأوائل.",
            category: "علم الكلام والتصوف"
        },
        {
            id: 11,
            name: "الحارث المحاسبي",
            dates: "781 - 857 م",
            bio: "صوفي ومتكلم، يُعتبر من مؤسسي علم النفس الأخلاقي في الإسلام. ركز على محاسبة النفس ومراقبة الخواطر.",
            influence: "الفكر الصوفي المبكر",
            area: "علم النفس الأخلاقي، التصوف",
            works: "الرعاية لحقوق الله، آداب النفوس.",
            category: "علم الكلام والتصوف"
        },
        {
            id: 12,
            name: "ذو النون المصري",
            dates: "توفي 859 م",
            bio: "من أعلام التصوف الأوائل في مصر. أدخل مفهوم 'المعرفة' (Gnosis) الباطنية إلى التصوف.",
            influence: "الزهد، الفكر الهرمسي",
            area: "التصوف، المعرفة الباطنية",
            works: "أقوال وحكم مأثورة في كتب التصوف.",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 13,
            name: "الجاحظ",
            dates: "776 - 869 م",
            bio: "أديب موسوعي ومتكلم معتزلي، يعتبر من أئمة الأدب العربي. تميز أسلوبه بالاستطراد والجمع بين الجد والهزل.",
            influence: "الفكر المعتزلي، الثقافة اليونانية المترجمة",
            area: "الأدب، علم الحيوان، علم الكلام، نظرية المعرفة",
            works: "كتاب الحيوان، البيان والتبيين، البخلاء.",
            category: "الأدب والفلسفة"
        },
        {
            id: 14,
            name: "ابن كرام",
            dates: "توفي 869 م",
            bio: "مؤسس فرقة الكرّامية، وهي فرقة كلامية لها آراء خاصة في الإيمان والتجسيم.",
            influence: "غير محدد",
            area: "علم الكلام، التجسيم",
            works: "كتبه مفقودة، آراؤه معروفة من خلال الردود عليه.",
            category: "علم الكلام المبكر"
        },
        {
            id: 15,
            name: "الكندي",
            dates: "801 - 873 م",
            bio: "يُلقب بـ 'فيلسوف العرب'، وهو أول الفلاسفة المشائين البارزين في العالم الإسلامي. سعى للتوفيق بين الفلسفة اليونانية والإسلام.",
            influence: "أرسطو, الأفلاطونية المحدثة",
            area: "الميتافيزيقا، الأخلاق، الرياضيات، الموسيقى",
            works: "رسالة في الفلسفة الأولى، رسالة في العقل، رسالة في الحيلة لدفع الأحزان",
            category: "الفلسفة المشائية"
        },
        {
            id: 16,
            name: "أبو معشر البلخي",
            dates: "787 - 886 م",
            bio: "فلكي ومنجم، يعتبر من أشهر المنجمين في العصر العباسي. كان لأعماله تأثير كبير في أوروبا في العصور الوسطى.",
            influence: "الفلك الساساني والهندي واليوناني",
            area: "علم التنجيم، الفلسفة الطبيعية، علم الفلك",
            works: "المدخل الكبير إلى علم أحكام النجوم.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 17,
            name: "ثابت بن قرة",
            dates: "826 - 901 م",
            bio: "عالم رياضيات وفلك وطبيب ومترجم بارع. أسهم في الهندسة ونظرية الأعداد والفلك.",
            influence: "الرياضيات الإغريقية",
            area: "الرياضيات، الفلك، الفلسفة الطبيعية",
            works: "ترجمات وشروحات لأعمال إقليدس وأرخميدس، أعمال مبتكرة في الرياضيات.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 18,
            name: "أبو علي الجبائي",
            dates: "849 - 915 م",
            bio: "شيخ المعتزلة في البصرة، وأستاذ أبو الحسن الأشعري قبل انفصاله عنه. طور العديد من أفكار المعتزلة.",
            influence: "شيوخ المعتزلة قبله",
            area: "علم الكلام",
            works: "أعماله مفقودة، وآراؤه منقولة في كتب الأشعري وابنه أبي هاشم.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 19,
            name: "أبو بكر الرازي",
            dates: "865 - 925 م",
            bio: "طبيب وكيميائي وفيلسوف، عُرف بآرائه العقلانية الجريئة وشكوكه الفلسفية. كان يعتقد بأولوية العقل على النقل.",
            influence: "أفلاطون، ديموقريطس",
            area: "الطب، الفلسفة الطبيعية، الأخلاق",
            works: "الحاوي في الطب، الطب الروحاني، السيرة الفلسفية",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 20,
            name: "البتاني",
            dates: "858 - 929 م",
            bio: "فلكي ورياضي، من أعظم فلكيي الإسلام. صحح العديد من حسابات بطليموس وقدم أرصاداً دقيقة.",
            influence: "بطليموس، الفلك الهندي",
            area: "علم الفلك، حساب المثلثات",
            works: "الزيج الصابئ.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 21,
            name: "ابن مسرة",
            dates: "883 - 931 م",
            bio: "فيلسوف ومتصوف أندلسي مبكر، يعتبر من مؤسسي الفلسفة في الأندلس. كانت تعاليمه باطنية وأثارت جدلاً.",
            influence: "الأفلاطونية المحدثة، الباطنية",
            area: "التصوف، الفلسفة",
            works: "أعماله مفقودة (مثل كتاب الإعتبار وكتاب خواص الحروف).",
            category: "الفكر الأندلسي"
        },
        {
            id: 22,
            name: "أبو القاسم الكعبي البلخي",
            dates: "توفي 931 م",
            bio: "من زعماء المعتزلة في بغداد، اشتهر بكتبه في المقالات والفرق الكلامية.",
            influence: "فكر المعتزلة",
            area: "علم الكلام، المقالات والفرق",
            works: "كتاب المقالات.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 23,
            name: "أبو هاشم الجبائي",
            dates: "توفي 933 م",
            bio: "ابن أبي علي الجبائي وخليفته في رئاسة معتزلة البصرة. اشتهر بنظرية الأحوال.",
            influence: "أبو علي الجبائي",
            area: "علم الكلام (نظرية الأحوال)",
            works: "أعماله مفقودة، آراؤه محفوظة في كتب المتكلمين اللاحقين.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 24,
            name: "أبو الحسن الأشعري",
            dates: "874 - 936 م",
            bio: "مؤسس المدرسة الأشعرية في علم الكلام، والتي أصبحت المدرسة السائدة في الفكر السني. كان معتزلياً ثم انفصل عنهم.",
            influence: "ابن كلاب, الفكر المعتزلي (كنقد)",
            area: "علم الكلام، اللاهوت",
            works: "مقالات الإسلاميين، الإبانة عن أصول الديانة.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 25,
            name: "أبو منصور الماتريدي",
            dates: "توفي 944 م",
            bio: "مؤسس المدرسة الماتريدية في علم الكلام، وهي مدرسة كلامية سنية انتشرت في بلاد المشرق الإسلامي.",
            influence: "أبو حنيفة",
            area: "علم الكلام، اللاهوت، تفسير القرآن",
            works: "كتاب التوحيد، تأويلات أهل السنة.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 26,
            name: "الفارابي",
            dates: "872 - 950 م",
            bio: "لُقب بـ 'المعلم الثاني' بعد أرسطو. فيلسوف منطقي وسياسي، أسس لمدرسة فلسفية متكاملة.",
            influence: "أرسطو, أفلاطون, الكندي",
            area: "المنطق، فلسفة السياسة، الميتافيزيقا",
            works: "آراء أهل المدينة الفاضلة، كتاب الموسيقى الكبير، إحصاء العلوم",
            category: "الفلسفة المشائية"
        },
        {
            id: 27,
            name: "إخوان الصفا",
            dates: "القرن 10 م",
            bio: "جماعة سرية من الفلاسفة والمفكرين في البصرة وبغداد. ألفوا رسائل موسوعية تهدف إلى التوفيق بين الدين والفلسفة.",
            influence: "الفيثاغورية، الهرمسية، الأفلاطونية المحدثة، الفكر الإسماعيلي.",
            area: "فلسفة موسوعية، رياضيات، طبيعيات، علم النفس، لاهوت.",
            works: "رسائل إخوان الصفا وخلان الوفا.",
            category: "الفلسفة الموسوعية"
        },
        {
            id: 28,
            name: "القبيصي",
            dates: "توفي 967 م",
            bio: "فلكي ومنجم وعالم رياضيات. اشتهر بكتابه 'المدخل إلى صناعة أحكام النجوم' الذي كان مرجعاً هاماً في أوروبا.",
            influence: "الفلك اليوناني",
            area: "الفلك، التنجيم، الرياضيات",
            works: "المدخل إلى صناعة أحكام النجوم.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 29,
            name: "أبو سليمان السجستاني",
            dates: "912 - 985 م",
            bio: "فيلسوف ومنطقي بارز في بغداد، كان زعيم حلقة فلسفية شهيرة تهتم بالمنطق والفلسفة الإلهية.",
            influence: "الفارابي, أرسطو",
            area: "المنطق، الفلسفة الإلهية، تاريخ الفلسفة",
            works: "صوان الحكمة (يُنسب إليه)، أغلب أعماله مفقودة.",
            category: "الفلسفة المشائية"
        },
        {
            id: 30,
            name: "أبو الحسن العامري",
            dates: "توفي 992 م",
            bio: "فيلسوف من خراسان، اهتم بالأخلاق ومقارنة الأديان، وسعى للدفاع عن الإسلام بالفلسفة.",
            influence: "الكندي، الفلسفة اليونانية",
            area: "الأخلاق، مقارنة الأديان، الفلسفة",
            works: "الإعلام بمناقب الإسلام، السعادة والإسعاد.",
            category: "الفلسفة المشائية"
        },
        {
            id: 31,
            name: "ابن حزم الأندلسي",
            dates: "994 - 1064 م",
            bio: "فقيه وشاعر ومؤرخ وفيلسوف من قرطبة. كان من رواد المذهب الظاهري الصارم في الفقه.",
            influence: "النصوص الدينية، المنطق الأرسطي",
            area: "الفقه الظاهري، مقارنة الأديان، المنطق، الأخلاق، فلسفة الحب",
            works: "الفصل في الملل والأهواء والنحل، طوق الحمامة في الألفة والألاف، المحلى بالآثار.",
            category: "الفكر الأندلسي"
        },
        {
            id: 32,
            name: "أبو بكر الباقلاني",
            dates: "950 - 1013 م",
            bio: "متكلم أشعري بارز، يعتبر من أهم المنظرين للمذهب الأشعري. اشتهر بدفاعه عن العقيدة ونظرية الجوهر الفرد.",
            influence: "الأشعري",
            area: "علم الكلام، نظرية الجوهر الفرد (الذرة)",
            works: "التمهيد، إعجاز القرآن.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 33,
            name: "ابن فورك",
            dates: "توفي 1015 م",
            bio: "متكلم أشعري من أصفهان، له إسهامات في شرح وتفصيل المذهب الأشعري.",
            influence: "الأشعري, الباقلاني",
            area: "علم الكلام، التفسير",
            works: "مشكل الحديث وبيانه، مقالات الشيخ أبي الحسن الأشعري.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 34,
            name: "حامد الدين الكرماني",
            dates: "996 - 1021 م",
            bio: "داعي وفيلسوف إسماعيلي من العصر الفاطمي، يعتبر من أهم فلاسفة الإسماعيلية.",
            influence: "الفكر الإسماعيلي، الفلسفة الأفلاطونية المحدثة",
            area: "الفلسفة الإسماعيلية، الميتافيزيقا",
            works: "راحة العقل.",
            category: "الفكر الإسماعيلي"
        },
        {
            id: 35,
            name: "أبو حيان التوحيدي",
            dates: "923 - 1023 م",
            bio: "أديب وفيلسوف، يُعرف بـ'فيلسوف الأدباء وأديب الفلاسفة'. تميزت كتاباته بالعمق والتشاؤم.",
            influence: "الفلسفة اليونانية، المتكلمين المعتزلة",
            area: "الأدب الفلسفي، الأخلاق، التصوف، علم الاجتماع",
            works: "المقابسات، الإمتاع والمؤانسة، أخلاق الوزيرين.",
            category: "الأدب والفلسفة"
        },
        {
            id: 36,
            name: "القاضي عبد الجبار",
            dates: "935 - 1025 م",
            bio: "قاضي قضاة الري وأحد أبرز وأهم شيوخ المعتزلة في عصره، أعماله مصدر رئيسي لمعرفة فكر المعتزلة.",
            influence: "أبو علي وأبو هاشم الجبائي",
            area: "علم الكلام (العدل والتوحيد)، أصول الفقه",
            works: "المغني في أبواب التوحيد والعدل، شرح الأصول الخمسة.",
            category: "علم الكلام (المعتزلة)"
        },
        {
            id: 37,
            name: "أبو إسحاق الإسفراييني",
            dates: "توفي 1027 م",
            bio: "فقيه شافعي ومتكلم أشعري، من كبار علماء خراسان في عصره.",
            influence: "المدرسة الأشعرية",
            area: "علم الكلام، أصول الفقه",
            works: "أعماله غير مطبوعة ولكنها منقولة في كتب اللاحقين.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 38,
            name: "مسكويه",
            dates: "932 - 1030 م",
            bio: "مؤرخ وفيلسوف اهتم بالأخلاق العملية. يعتبر عمله 'تهذيب الأخلاق' من أهم كتب الأخلاق الفلسفية.",
            influence: "أرسطو, أفلاطون, جالينوس",
            area: "الأخلاق، التاريخ، الفلسفة العملية",
            works: "تهذيب الأخلاق وتطهير الأعراق، تجارب الأمم وتعاقب الهمم.",
            category: "الأدب والفلسفة"
        },
        {
            id: 39,
            name: "ابن سينا",
            dates: "980 - 1037 م",
            bio: "طبيب وفيلسوف موسوعي، من أعظم المفكرين في التاريخ. كان لنسقه الفلسفي تأثير هائل على الفكر الإسلامي والأوروبي.",
            influence: "أرسطو, الفارابي",
            area: "الطب، الميتافيزيقا، المنطق، علم النفس",
            works: "كتاب الشفاء، القانون في الطب، الإشارات والتنبيهات",
            category: "الفلسفة المشائية"
        },
        {
            id: 40,
            name: "ابن الهيثم",
            dates: "965 - 1040 م",
            bio: "عالم فيزياء ورياضيات، يعتبر مؤسس علم البصريات الحديث والمنهج العلمي التجريبي. قدم مساهمات فلسفية في الإدراك والمنهج.",
            influence: "إقليدس، بطليموس",
            area: "البصريات، المنهج العلمي، الفيزياء، الإدراك البصري",
            works: "كتاب المناظر، الشكوك على بطليموس، رسالة في المكان.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 41,
            name: "أبو الريحان البيروني",
            dates: "973 - 1048 م",
            bio: "عالم موسوعي، تميز بمنهجه التجريبي والمقارن في دراسة الظواهر الطبيعية والثقافات المختلفة، خاصة الثقافة الهندية.",
            influence: "الفلسفة اليونانية والفكر الهندي",
            area: "علم الفلك، الفيزياء، الأنثروبولوجيا، مقارنة الأديان، التاريخ",
            works: "تحقيق ما للهند من مقولة مقبولة في العقل أو مرذولة، الآثار الباقية عن القرون الخالية.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 42,
            name: "الماوردي",
            dates: "972 - 1058 م",
            bio: "فقيه شافعي وقاضٍ، من أبرز منظري الفكر السياسي الإسلامي السني.",
            influence: "الفقه الشافعي",
            area: "الفلسفة السياسية، الفقه",
            works: "الأحكام السلطانية.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 97,
            name: "أبو العلاء المعري",
            dates: "973 - 1057 م",
            bio: "شاعر وفيلسوف وأديب كفيف، عُرف بعقلانيته الصارمة، تشاؤمه، وزهده. قدّم العقل على النقل وشكك في العقائد السائدة.",
            influence: "الشعر العربي، الفلسفة اليونانية",
            area: "الشعر الفلسفي، العقلانية، الأخلاق، نقد الدين",
            works: "اللزوميات، رسالة الغفران",
            category: "الأدب والفلسفة"
        },
        {
            id: 43,
            name: "بهمنيار بن المرزبان",
            dates: "توفي 1066 م",
            bio: "تلميذ ابن سينا البارز، شرح فلسفة أستاذه ولخصها بأسلوب واضح.",
            influence: "ابن سينا",
            area: "المنطق، الميتافيزيقا",
            works: "التحصيل.",
            category: "الفلسفة المشائية"
        },
        {
            id: 44,
            name: "أبو يعلى الفراء",
            dates: "990 - 1066 م",
            bio: "فقيه حنبلي وقاضٍ، له إسهامات في الفكر السياسي على المذهب الحنبلي.",
            influence: "الفقه الحنبلي",
            area: "الفلسفة السياسية، الفقه",
            works: "الأحكام السلطانية.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 45,
            name: "عبد القاهر الجرجاني",
            dates: "توفي 1078 م",
            bio: "لغوي وبلاغي، يعتبر مؤسس علم البلاغة العربية. ربط بين اللغة والنحو والمعنى بشكل مبتكر.",
            influence: "النحو العربي",
            area: "فلسفة اللغة، البلاغة، النحو",
            works: "أسرار البلاغة، دلائل الإعجاز.",
            category: "الأدب والفلسفة"
        },
        {
            id: 46,
            name: "أبو إسحاق الشيرازي",
            dates: "1003 - 1083 م",
            bio: "فقيه شافعي وأصولي، من أبرز علماء الشافعية في عصره ومدير المدرسة النظامية ببغداد.",
            influence: "الفقه الشافعي",
            area: "أصول الفقه، الجدل، الفقه",
            works: "اللمع في أصول الفقه، المهذب في فقه الإمام الشافعي.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 47,
            name: "أبو المعالي الجويني",
            dates: "1028 - 1085 م",
            bio: "فقيه ومتكلم أشعري، أستاذ الغزالي. لُقب بـ 'إمام الحرمين'. كان له تأثير كبير في تطوير المذهب الأشعري.",
            influence: "الأشعري, الباقلاني",
            area: "علم الكلام، أصول الفقه، اللاهوت",
            works: "الإرشاد إلى قواطع الأدلة في أصول الاعتقاد، البرهان في أصول الفقه.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 48,
            name: "ناصر خسرو",
            dates: "1004 - 1088 م",
            bio: "شاعر وفيلسوف ورحالة وداعية إسماعيلي. تميز شعره وفكره بعمق فلسفي.",
            influence: "الفكر الإسماعيلي",
            area: "الفلسفة، الشعر، الرحلات",
            works: "جامع الحكمتين، سفرنامه.",
            category: "الفكر الإسماعيلي"
        },
        {
            id: 49,
            name: "الغزالي",
            dates: "1058 - 1111 م",
            bio: "متكلم وفقيه ومتصوف، يُعرف بـ 'حجة الإسلام'. انتقد الفلاسفة المشائين ودمج التصوف في صلب الفكر السني.",
            influence: "الفكر الأشعري, ابن سينا (كنقد)",
            area: "علم الكلام، التصوف، نقد الفلسفة",
            works: "تهافت الفلاسفة، إحياء علوم الدين، المنقذ من الضلال",
            category: "علم الكلام والتصوف"
        },
        {
            id: 50,
            name: "ابن باجة",
            dates: "1085 - 1138 م",
            bio: "أول فيلسوف مشائي كبير في الأندلس. ركز على فكرة 'تدبير المتوحد'، أي كيف يمكن للفيلسوف تحقيق الكمال في مجتمع غير فاضل.",
            influence: "الفارابي, أرسطو",
            area: "الأخلاق، السياسة، علم النفس",
            works: "تدبير المتوحد، رسالة الوداع",
            category: "الفكر الأندلسي"
        },
 
         {
            id: 95,
            name: "أبو البركات البغدادي",
            dates: "1080 - 1165 م",
            bio: "فيلسوف وطبيب يهودي الأصل، أسلم في آخر حياته. عُرف بنقده للفلسفة الأرسطية والسينوية، خاصة في الفيزياء والميتافيزيقا.",
            influence: "أرسطو, ابن سينا (كنقد)",
            area: "نقد الفيزياء، علم النفس، الميتافيزيقا، علم الحركة",
            works: "الكتاب المعتبر في الحكمة",
            category: "الفلسفة المشائية"
        },
        {
            id: 52,
            name: "ابن عساكر",
            dates: "1105 - 1176 م",
            bio: "مؤرخ ومحدث، أشهر أعماله 'تاريخ دمشق' وهو موسوعة ضخمة عن تاريخ المدينة ورجالاتها.",
            influence: "علم الحديث والتاريخ",
            area: "التاريخ، الحديث",
            works: "تاريخ دمشق.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 53,
            name: "ابن طفيل",
            dates: "1105 - 1185 م",
            bio: "فيلسوف وطبيب، اشتهر بروايته الفلسفية 'حي بن يقظان' التي تستكشف إمكانية وصول العقل البشري للحقيقة دون وحي أو مجتمع.",
            influence: "ابن سينا, ابن باجة",
            area: "القصة الفلسفية، علم النفس، التوفيق بين العقل والدين",
            works: "حي بن يقظان",
            category: "الفكر الأندلسي"
        },
        {
            id: 54,
            name: "ابن رشد",
            dates: "1126 - 1198 م",
            bio: "أعظم شراح أرسطو، دافع عن الفلسفة ضد هجوم الغزالي. كان له تأثير حاسم على الفلسفة الأوروبية في العصور الوسطى.",
            influence: "أرسطو, الفارابي, ابن باجة, الغزالي (كنقد)",
            area: "الفلسفة، الطب، الفقه، العلاقة بين الدين والفلسفة",
            works: "تهافت التهافت، فصل المقال، شروحاته الكبرى على أرسطو.",
            category: "الفكر الأندلسي"
        },
        {
            id: 55,
            name: "السهروردي",
            dates: "1154 - 1191 م",
            bio: "مؤسس 'فلسفة الإشراق'، وهي مدرسة تجمع بين الفلسفة المشائية والتصوف والحكمة الفارسية القديمة.",
            influence: "الأفلاطونية، الزرادشتية، الفكر الصوفي",
            area: "الميتافيزيقا، التصوف (الإشراق)",
            works: "حكمة الإشراق",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 56,
            name: "ابن الجوزي",
            dates: "1116 - 1201 م",
            bio: "فقيه حنبلي ومؤرخ وواعظ شهير، معروف بغزارة إنتاجه ونقده اللاذع للتصوف المنحرف.",
            influence: "الفقه الحنبلي",
            area: "نقد التصوف، الأخلاق، التاريخ",
            works: "تلبيس إبليس، صيد الخاطر.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 57,
            name: "فخر الدين الرازي",
            dates: "1149 - 1209 م",
            bio: "متكلم وفيلسوف ومفسر موسوعي. جمع بين علم الكلام الأشعري والفلسفة، واشتهر بتفسيره الكبير 'مفاتيح الغيب'.",
            influence: "الغزالي, ابن سينا",
            area: "علم الكلام، التفسير، نقد الفلسفة",
            works: "مفاتيح الغيب (التفسير الكبير)، المباحث المشرقية، أساس التقديس.",
            category: "علم الكلام والتصوف"
        },
        {
            id: 58,
            name: "ابن عربي",
            dates: "1165 - 1240 م",
            bio: "يُلقب بـ 'الشيخ الأكبر'، وهو من أبرز المتصوفة والفلاسفة. طور نظرية 'وحدة الوجود' التي أثرت بعمق في الفكر الصوفي.",
            influence: "الفكر الصوفي، الأفلاطونية المحدثة",
            area: "التصوف، الميتافيزيقا (وحدة الوجود)، علم الكونيات",
            works: "الفتوحات المكية، فصوص الحكم",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 59,
            name: "ابن الفارض",
            dates: "1181 - 1235 م",
            bio: "شاعر صوفي مصري، يُلقب بـ 'سلطان العاشقين'. شعره يمثل ذروة الشعر الصوفي الرمزي في الحب الإلهي.",
            influence: "التصوف",
            area: "الشعر الفلسفي الصوفي",
            works: "ديوانه، وأشهر قصائده التائية الكبرى.",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 60,
            name: "شهاب الدين عمر السهروردي",
            dates: "1145 - 1234 م",
            bio: "صوفي، مؤسس الطريقة السهروردية في التصوف العملي، وهو يختلف عن السهروردي المقتول فيلسوف الإشراق.",
            influence: "التصوف السني",
            area: "التصوف العملي (الطريقة)",
            works: "عوارف المعارف.",
            category: "علم الكلام والتصوف"
        },
        {
            id: 61,
            name: "الآمدي",
            dates: "1156 - 1233 م",
            bio: "متكلم وأصولي، اشتهر بأعماله المنهجية في علم الكلام وأصول الفقه والجدل.",
            influence: "فخر الدين الرازي",
            area: "المنطق، علم الكلام، الجدل، أصول الفقه",
            works: "الإحكام في أصول الأحكام، أبكار الأفكار في أصول الدين.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 62,
            name: "نصير الدين الطوسي",
            dates: "1201 - 1274 م",
            bio: "فيلسوف وعالم فلك ورياضيات. أشرف على بناء مرصد مراغة. كان له إسهامات كبيرة في علم المثلثات والفلك.",
            influence: "ابن سينا، الفكر اليوناني",
            area: "الأخلاق، الفلك، المنطق، الرياضيات",
            works: "أخلاق ناصري، الزيج الإيلخاني، التذكرة في علم الهيئة.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 63,
            name: "عز الدين بن عبد السلام",
            dates: "1181 - 1262 م",
            bio: "فقيه شافعي مجتهد، لُقب بسلطان العلماء لمواقفه الجريئة. برع في مجال قواعد الفقه ومقاصد الشريعة.",
            influence: "الفقه الشافعي",
            area: "الفقه، القواعد الفقهية، مقاصد الشريعة",
            works: "قواعد الأحكام في مصالح الأنام.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 64,
            name: "ابن سبعين",
            dates: "1217 - 1270 م",
            bio: "فيلسوف متصوف من مرسية، عُرف بآرائه الجريئة في وحدة الوجود وأسلوبه الغامض.",
            influence: "ابن عربي, الفكر الصوفي والفلسفة المشائية",
            area: "التصوف، الميتافيزيقا، نقد الفلسفة والعلوم",
            works: "بد العارف، الرسالة النورية، الأجوبة عن المسائل الصقلية.",
            category: "الفكر الأندلسي"
        },
        {
            id: 65,
            name: "ابن أبي أصيبعة",
            dates: "1203 - 1270 م",
            bio: "طبيب ومؤرخ للطب، كتابه 'عيون الأنباء' هو أهم مصدر لتاريخ الطب والأطباء في العالم الإسلامي.",
            influence: "الطب اليوناني والعربي",
            area: "تاريخ الفلسفة والطب",
            works: "عيون الأنباء في طبقات الأطباء.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 66,
            name: "ابن كمونة",
            dates: "1215 - 1284 م",
            bio: "فيلسوف وطبيب يهودي من بغداد، اشتهر بكتابه في مقارنة الأديان الثلاثة (اليهودية والمسيحية والإسلام).",
            influence: "الفلسفة الإسلامية واليهودية",
            area: "مقارنة الأديان، المنطق، الفلسفة",
            works: "تنقيح الأبحاث للملل الثلاث.",
            category: "الأدب والفلسفة"
        },
        {
            id: 67,
            name: "ابن النفيس",
            dates: "1213 - 1288 م",
            bio: "طبيب وعالم موسوعي، يُنسب إليه اكتشاف الدورة الدموية الصغرى، وكان له اهتمامات فلسفية ومنطقية.",
            influence: "ابن سينا، الطب اليوناني",
            area: "الطب، الفلسفة، علم وظائف الأعضاء",
            works: "شرح تشريح القانون، الرسالة الكاملية في السيرة النبوية.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 68,
            name: "ابن تيمية",
            dates: "1263 - 1328 م",
            bio: "فقيه ومتكلم ومصلح، من أكثر الشخصيات تأثيرًا وجدلاً. ركز على العودة إلى فهم السلف ونقد الفلسفة وعلم الكلام والتصوف.",
            influence: "الفقه الحنبلي، فكر السلف",
            area: "نقد الفلسفة والمنطق، اللاهوت، الفقه",
            works: "الرد على المنطقيين، درء تعارض العقل والنقل، مجموع الفتاوى.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 69,
            name: "قطب الدين الشيرازي",
            dates: "1236 - 1311 م",
            bio: "تلميذ نصير الدين الطوسي، عالم موسوعي برع في الفلك والطب والفلسفة وقدم أول شرح علمي صحيح لظاهرة قوس قزح.",
            influence: "نصير الدين الطوسي, ابن سينا, السهروردي",
            area: "الفلك، البصريات، الفلسفة الإشراقية",
            works: "نهاية الإدراك في دراية الأفلاك، درة التاج لغرة الدباج.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 70,
            name: "ابن البناء المراكشي",
            dates: "1256 - 1321 م",
            bio: "عالم رياضيات وفلك من المغرب، له إسهامات هامة في الحساب والجبر.",
            influence: "علماء الرياضيات العرب قبله",
            area: "الرياضيات، الفلسفة، الفلك",
            works: "تلخيص أعمال الحساب، رفع الحجاب عن وجوه أعمال الحساب.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 71,
            name: "عضد الدين الإيجي",
            dates: "1281 - 1355 م",
            bio: "متكلم أشعري، كتابه 'المواقف' أصبح من أهم المراجع الدراسية في علم الكلام الأشعري لقرون.",
            influence: "المدرسة الأشعرية المتأخرة",
            area: "علم الكلام، أصول الفقه",
            works: "المواقف في علم الكلام.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 72,
            name: "ابن قيم الجوزية",
            dates: "1292 - 1350 م",
            bio: "من أبرز تلاميذ ابن تيمية، وناشر علمه. تميز بكتاباته في الأخلاق والسلوك وتهذيب النفس.",
            influence: "ابن تيمية",
            area: "الأخلاق، علم النفس، اللاهوت، الفقه",
            works: "مدارج السالكين، زاد المعاد، الداء والدواء.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 73,
            name: "لسان الدين بن الخطيب",
            dates: "1313 - 1374 م",
            bio: "مؤرخ وشاعر وطبيب وفيلسوف ووزير من غرناطة. كان شخصية موسوعية تمثل العصر الذهبي الأخير للأندلس.",
            influence: "الفكر الأندلسي",
            area: "التاريخ، السياسة، الأخلاق، الطب",
            works: "الإحاطة في أخبار غرناطة.",
            category: "الفكر الأندلسي"
        },
        {
            id: 74,
            name: "الذهبي",
            dates: "1274 - 1348 م",
            bio: "مؤرخ ومحدث، من كبار مؤرخي الإسلام. اشتهر بكتبه في التراجم والجرح والتعديل.",
            influence: "علم الحديث والتاريخ",
            area: "تاريخ الرجال والفكر",
            works: "سير أعلام النبلاء، تاريخ الإسلام.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 75,
            name: "تقي الدين السبكي",
            dates: "1284 - 1355 م",
            bio: "فقيه شافعي وأصولي ومتكلم أشعري، من أبرز علماء عصره في مصر والشام.",
            influence: "الفقه الشافعي، المذهب الأشعري",
            area: "الفقه، علم الكلام، الحديث",
            works: "شفاء السقام في زيارة خير الأنام.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 76,
            name: "ابن كثير",
            dates: "1300 - 1373 م",
            bio: "مؤرخ ومفسر ومحدث، تلميذ ابن تيمية. اشتهر بتفسيره للقرآن وتاريخه 'البداية والنهاية'.",
            influence: "ابن تيمية",
            area: "التاريخ، التفسير، الحديث",
            works: "تفسير القرآن العظيم، البداية والنهاية.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 77,
            name: "الشاطبي",
            dates: "توفي 1388 م",
            bio: "فقيه أصولي أندلسي، يعتبر مؤسس علم مقاصد الشريعة كنظام متكامل.",
            influence: "الفقه المالكي",
            area: "فلسفة التشريع الإسلامي (المقاصد)، أصول الفقه",
            works: "الموافقات في أصول الشريعة.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 78,
            name: "سعد الدين التفتازاني",
            dates: "1322 - 1390 م",
            bio: "لغوي ومتكلم ومنطقي، أصبحت شروحاته وحواشيه على المتون العلمية مراجع أساسية في المدارس الإسلامية.",
            influence: "الماتريدية، الأشعرية",
            area: "المنطق، البلاغة، علم الكلام",
            works: "شرح المقاصد، شرح العقائد النسفية.",
            category: "علم الكلام (الأشاعرة والماتريدية)"
        },
        {
            id: 79,
            name: "ابن خلدون",
            dates: "1332 - 1406 م",
            bio: "مؤرخ وفيلسوف، يعتبر مؤسس علم الاجتماع الحديث. قدم في مقدمته تحليلاً عميقاً لنشأة الدول وسقوطها.",
            influence: "الفكر التاريخي الإسلامي، الواقع السياسي",
            area: "فلسفة التاريخ، علم الاجتماع (العمران)، الاقتصاد، السياسة",
            works: "مقدمة ابن خلدون (مقدمة كتابه العبر).",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 80,
            name: "الشريف الجرجاني",
            dates: "1339 - 1413 م",
            bio: "لغوي ومتكلم وفيلسوف، اشتهر بكتابه 'التعريفات' الذي يعد معجماً للمصطلحات العلمية والفلسفية.",
            influence: "الفكر الكلامي والفلسفي",
            area: "المنطق، التعريفات الفلسفية، علم الكلام",
            works: "التعريفات، شرح المواقف.",
            category: "الأدب والفلسفة"
        },
        {
            id: 81,
            name: "المقريزي",
            dates: "1364 - 1442 م",
            bio: "مؤرخ مصري، من أبرز مؤرخي مصر في العصر المملوكي. تميزت كتاباته بالتركيز على التاريخ الاجتماعي والاقتصادي.",
            influence: "ابن خلدون",
            area: "تاريخ مصر الاجتماعي والاقتصادي",
            works: "المواعظ والاعتبار بذكر الخطط والآثار.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 82,
            name: "عبد الرحمن الجامي",
            dates: "1414 - 1492 م",
            bio: "شاعر ومتصوف فارسي، يعتبر من آخر كبار الشعراء الكلاسيكيين في الأدب الفارسي. تأثر بفكر ابن عربي.",
            influence: "ابن عربي, الفكر الصوفي",
            area: "التصوف، الشعر، الميتافيزيقا",
            works: "لوائح، نفحات الأنس.",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 83,
            name: "ابن الأزرق",
            dates: "1427 - 1491 م",
            bio: "قاضٍ وسياسي من غرناطة، كتب شرحاً هاماً على مقدمة ابن خلدون، حاول فيه تطبيق نظرياته.",
            influence: "ابن خلدون",
            area: "الفلسفة السياسية، علم الاجتماع",
            works: "بدائع السلك في طبائع الملك.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 84,
            name: "أحمد زروق",
            dates: "1442 - 1493 م",
            bio: "فقيه مالكي وصوفي من المغرب، سعى للتوفيق بين الشريعة والحقيقة (الفقه والتصوف).",
            influence: "الفقه المالكي، التصوف الشاذلي",
            area: "التصوف، الفقه",
            works: "قواعد التصوف، شرح حكم ابن عطاء الله السكندري.",
            category: "علم الكلام والتصوف"
        },
        {
            id: 85,
            name: "ابن أبي جمهور الأحسائي",
            dates: "1434 - 1505 م",
            bio: "فيلسوف ومتكلم شيعي، حاول التوفيق بين الفلسفة المشائية والإشراقية والكلام الشيعي والعرفان.",
            influence: "ابن سينا, السهروردي, الفكر الشيعي",
            area: "الفلسفة، علم الكلام، العرفان",
            works: "عوالي اللآلئ، المجلي.",
            category: "الفلسفة المشائية"
        },
        {
            id: 86,
            name: "جلال الدين الدواني",
            dates: "1426 - 1502 م",
            bio: "فيلسوف ومتكلم من دوان في فارس، له مؤلفات في الأخلاق والميتافيزيقا وشروح على العقائد.",
            influence: "الفكر الإشراقي والكلامي",
            area: "الأخلاق، الميتافيزيقا",
            works: "شرح العقائد العضدية، لوامع الإشراق في مكارم الأخلاق (الأخلاق الجلالية).",
            category: "علم الكلام والتصوف"
        },
        {
            id: 87,
            name: "جلال الدين السيوطي",
            dates: "1445 - 1505 م",
            bio: "عالم موسوعي، من أكثر المؤلفين إنتاجًا في التاريخ الإسلامي، كتب في كل العلوم المعروفة في عصره تقريبًا.",
            influence: "التراث الإسلامي بكافة فروعه",
            area: "كافة العلوم الإسلامية والتاريخ",
            works: "الإتقان في علوم القرآن، تاريخ الخلفاء، الجامع الصغير.",
            category: "مؤرخون وعلماء اجتماع"
        },
        {
            id: 88,
            name: "محمد بن عبد الكريم المغيلي",
            dates: "1440 - 1504 م",
            bio: "فقيه وسياسي من تلمسان، كان له تأثير سياسي وديني كبير في شمال وغرب أفريقيا.",
            influence: "الفقه المالكي",
            area: "الفلسفة السياسية، الفقه",
            works: "أسئلة وأجوبة.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 89,
            name: "مير داماد",
            dates: "توفي 1631 م",
            bio: "فيلسوف إيراني، مؤسس مدرسة أصفهان الفلسفية. اشتهر بنظريته في 'الحدوث الدهري'.",
            influence: "ابن سينا, السهروردي",
            area: "الميتافيزيقا (الحدوث الدهري)، الفلسفة الإسلامية",
            works: "القبسات، جذوات.",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 90,
            name: "الملا صدرا الشيرازي",
            dates: "1571 - 1640 م",
            bio: "فيلسوف إيراني، يعتبر من أعظم الفلاسفة المسلمين المتأخرين. أسس لمدرسة 'الحكمة المتعالية' التي تجمع بين البرهان والعرفان والقرآن.",
            influence: "ابن سينا, السهروردي, ابن عربي, مير داماد",
            area: "الحكمة المتعالية، الميتافيزيقا، الوجودية",
            works: "الأسفار الأربعة.",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 91,
            name: "بهاء الدين العاملي (الشيخ البهائي)",
            dates: "1547 - 1621 م",
            bio: "عالم موسوعي، برع في الفقه والرياضيات والفلك والهندسة والعرفان والأدب.",
            influence: "الفكر الشيعي والعلمي",
            area: "الرياضيات، الفلك، التصوف، الفقه",
            works: "الكشكول، مفتاح الفلاح.",
            category: "العلوم والفلسفة الطبيعية"
        },
        {
            id: 92,
            name: "أحمد السرهندي",
            dates: "1564 - 1624 م",
            bio: "مصلح ديني هندي، يُعرف بمجدد الألف الثاني. انتقد نظرية وحدة الوجود لابن عربي وقدم بديلاً عنها نظرية 'وحدة الشهود'.",
            influence: "الطريقة النقشبندية",
            area: "التصوف (وحدة الشهود)، الإصلاح الديني",
            works: "المكتوبات.",
            category: "علم الكلام والتصوف"
        },
        {
            id: 93,
            name: "عبد الغني النابلسي",
            dates: "1641 - 1731 م",
            bio: "صوفي وشاعر ورحالة دمشقي غزير الإنتاج. كان من المدافعين عن فكر ابن عربي ووحدة الوجود.",
            influence: "ابن عربي",
            area: "التصوف، وحدة الوجود، الفقه، الشعر",
            works: "إيضاح المقصود من وحدة الوجود، الحضرة الأنسية في الرحلة القدسية.",
            category: "التصوف والفلسفة الإشراقية"
        },
        {
            id: 94,
            name: "شاه ولي الله الدهلوي",
            dates: "1703 - 1762 م",
            bio: "مفكر ومصلح هندي، سعى للتوفيق بين مختلف المدارس الفقهية والكلامية والصوفية، وربطها بأصولها من القرآن والحديث.",
            influence: "التراث الإسلامي (الحديث، الفقه، التصوف)",
            area: "فلسفة التشريع، التصوف، الإصلاح الاجتماعي والسياسي",
            works: "حجة الله البالغة، الفوز الكبير في أصول التفسير.",
            category: "فقهاء وعلماء أصول"
        },
        {
            id: 96,
            name: "أبو عيسى الوراق",
            dates: "توفي حوالي 861 م",
            bio: "مفكر وباحث معتزلي سابق، تحول لاحقاً إلى شخصية شكوكية ومنتقدة للأديان المنزلة. يُعتبر من أبرز الشكوكيين في الفكر الإسلامي المبكر.",
            influence: "الفكر المعتزلي (كمنطلق)",
            area: "الشكوكية، نقد الأديان، المقالات والفرق",
            works: "أعماله مفقودة، وتُعرف آراؤه من خلال الردود عليه. ينسب إليه كتاب 'المقالات'.",
            category: "الأدب والفلسفة"
        }
    ];


    // --- DOM Elements ---
    const tabs = document.querySelectorAll('.tab-btn');
    const views = document.querySelectorAll('.view');
    const modalOverlay = document.getElementById('philosopher-modal');
    const modalCloseBtn = document.getElementById('modal-close-btn');
    const modalBody = document.getElementById('modal-body');

    // --- Utility Functions ---
    const getYear = (dates) => {
        const yearMatch = dates.match(/(\d{3,4})/);
        return yearMatch ? parseInt(yearMatch[0], 10) : 0;
    };

    philosophers.sort((a, b) => getYear(a.dates) - getYear(b.dates));

    // --- Modal Functions ---
    const openModal = (philosopher) => {
        if (!philosopher) return;
        modalBody.innerHTML = `
            <h2>${philosopher.name}</h2>
            <p class="philosopher-dates">${philosopher.dates}</p>
            <div class="modal-section">
                <h4>نبذة</h4>
                <p>${philosopher.bio}</p>
            </div>
            <div class="modal-section">
                <h4>الفئة</h4>
                <p>${philosopher.category}</p>
            </div>
            <div class="modal-section">
                <h4>مجال الاهتمام</h4>
                <p>${philosopher.area}</p>
            </div>
            <div class="modal-section">
                <h4>تأثر بـ</h4>
                <p>${philosopher.influence}</p>
            </div>
            <div class="modal-section">
                <h4>أهم الأعمال</h4>
                <p>${philosopher.works}</p>
            </div>
        `;
        modalOverlay.classList.add('show');
    };

    const closeModal = () => {
        modalOverlay.classList.remove('show');
    };

    // --- Render Functions ---
    const renderTimeline = () => {
        const timelineContent = document.getElementById('timeline-content');
        let lastYearCentury = null;
        timelineContent.innerHTML = philosophers.map((p) => {
            const year = getYear(p.dates);
            const century = Math.floor(year / 100) * 100;
            let yearLabel = '';
            // Display a year marker for each new century to avoid clutter
            if (century !== lastYearCentury) {
                yearLabel = `<div class="timeline-year">${century} م</div>`;
                lastYearCentury = century;
            }
            return `
                <div class="timeline-item">
                    ${yearLabel}
                    <div class="timeline-dot"></div>
                    <div class="timeline-card" data-id="${p.id}">
                        <h3>${p.name}</h3>
                        <p>${p.dates}</p>
                    </div>
                </div>
            `;
        }).join('');

        document.querySelectorAll('.timeline-card').forEach(card => {
            card.addEventListener('click', () => {
                const philosopher = philosophers.find(p => p.id == card.dataset.id);
                openModal(philosopher);
            });
        });
    };

    const renderCategories = () => {
        const categoriesGrid = document.getElementById('categories-grid');
        const categories = [...new Set(philosophers.map(p => p.category))].sort();
        const categoryColors = [
            '#0d9488', '#0284c7', '#6d28d9', '#be185d', '#d97706', 
            '#4f46e5', '#db2777', '#65a30d', '#ea580c', '#0891b2',
            '#7e22ce', '#047857', '#e11d48', '#1d4ed8'
        ];

        categoriesGrid.innerHTML = categories.map((cat, index) => {
            const philosophersInCategory = philosophers.filter(p => p.category === cat);
            return `
                <div class="category-card" style="background-color: ${categoryColors[index % categoryColors.length]}">
                    <h3>${cat} (${philosophersInCategory.length})</h3>
                    <div class="category-philosophers">
                        ${philosophersInCategory.map(p => `
                            <div class="philosopher-item" data-id="${p.id}">
                                <div class="philosopher-avatar">${p.name.charAt(0)}</div>
                                <div class="philosopher-item-info">
                                    <h4>${p.name}</h4>
                                    <p>${p.dates}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }).join('');

        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', (e) => {
                // If a philosopher item inside the card is clicked, open the modal
                if (e.target.closest('.philosopher-item')) {
                    const philosopherItem = e.target.closest('.philosopher-item');
                    const philosopher = philosophers.find(p => p.id == philosopherItem.dataset.id);
                    openModal(philosopher);
                } else {
                    // Otherwise, toggle the expansion of the card
                    card.classList.toggle('open');
                }
            });
        });
    };

    const renderGraph = () => {
        const nodes = philosophers.map(p => ({ id: p.id, name: p.name, category: p.category }));
        const links = [];
    
        const findPhilosopherByName = (name) => {
            const normalizedName = name.trim().replace('(كنقد)', '').trim();
            // Prioritize exact match, then partial match
            let found = philosophers.find(p => p.name === normalizedName);
            if (!found) {
                found = philosophers.find(p => p.name.includes(normalizedName) || normalizedName.includes(p.name));
            }
            return found;
        };
    
        philosophers.forEach(p => {
            if (p.influence) {
                const influences = p.influence.split(/[,،]/g);
                influences.forEach(infName => {
                    const influencedPhilosopher = findPhilosopherByName(infName);
                    if (influencedPhilosopher && influencedPhilosopher.id !== p.id) {
                        links.push({ source: influencedPhilosopher.id, target: p.id });
                    }
                });
            }
        });
    
        const graphContainer = document.getElementById('graph-container');
        const { width, height } = graphContainer.getBoundingClientRect();
        
        const svg = d3.select("#influence-graph");
        svg.selectAll("*").remove(); // Clear previous graph
    
        const color = d3.scaleOrdinal(d3.schemeCategory10);
    
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-250))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("x", d3.forceX(width / 2).strength(0.1))
            .force("y", d3.forceY(height / 2).strength(0.1));

        // Arrowhead marker definition
        svg.append('defs').append('marker')
            .attr('id', 'arrowhead')
            .attr('viewBox', '-0 -5 10 10')
            .attr('refX', 20)
            .attr('refY', 0)
            .attr('orient', 'auto')
            .attr('markerWidth', 6)
            .attr('markerHeight', 6)
            .attr('xoverflow', 'visible')
            .append('svg:path')
            .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
            .attr('fill', '#999')
            .style('stroke', 'none');

        const link = svg.append("g")
            .attr("stroke", "#999")
            .attr("stroke-opacity", 0.7)
            .selectAll("line")
            .data(links)
            .join("line")
            .attr("stroke-width", 1.5)
            .attr('marker-end', 'url(#arrowhead)');
    
        const node = svg.append("g")
            .selectAll("g")
            .data(nodes)
            .join("g")
            .attr("class", "node")
            .call(drag(simulation));
            
        node.append("circle")
            .attr("r", 10)
            .attr("fill", d => color(d.category))
            .on("click", (event, d) => {
                const philosopher = philosophers.find(p => p.id === d.id);
                openModal(philosopher);
            });
    
        node.append("text")
            .text(d => d.name)
            .attr('x', 15)
            .attr('y', 5);
    
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
    
            node
                .attr("transform", d => `translate(${d.x},${d.y})`);
        });

        function drag(simulation) {
            function dragstarted(event) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                event.subject.fx = event.subject.x;
                event.subject.fy = event.subject.y;
            }
            function dragged(event) {
                event.subject.fx = event.x;
                event.subject.fy = event.y;
            }
            function dragended(event) {
                if (!event.active) simulation.alphaTarget(0);
                event.subject.fx = null;
                event.subject.fy = null;
            }
            return d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended);
        }
    };

    // --- Event Listeners ---
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('active'));
            views.forEach(v => v.classList.remove('active'));

            tab.classList.add('active');
            const viewId = tab.id.replace('-tab', '-view');
            document.getElementById(viewId).classList.add('active');
            
            if (viewId === 'graph-view') {
                if (!d3.select("#influence-graph").select("g").node()) {
                    renderGraph();
                }
            }
        });
    });

    modalCloseBtn.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
            closeModal();
        }
    });

    // --- Initial Render ---
    renderTimeline();
    renderCategories();
});
